{"ast":null,"code":"import{useEffect,useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{patientAPI}from\"../../api/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(_ref){let{user,setUser}=_ref;const[summary,setSummary]=useState(null);const[loading,setLoading]=useState(true);const navigate=useNavigate();const handleLogout=()=>{setUser(null);navigate(\"/\");};useEffect(()=>{if(!user){navigate(\"/\");return;}const fetchSummary=async()=>{try{const patientId=user.id;console.log(\"Fetching summary for patient ID:\",patientId);const res=await patientAPI.get(\"summary/\".concat(patientId,\"/\"));console.log(\"Summary response:\",res.data);setSummary(res.data);setLoading(false);}catch(err){console.error(\"Error fetching summary:\",err);setLoading(false);}};fetchSummary();},[user,navigate]);if(!user)return null;if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})})});}// Get patient data from summary if available, otherwise use user\nconst patientData=(summary===null||summary===void 0?void 0:summary.patient)||user;return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome, \",patientData.first_name,\" \",patientData.last_name]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:handleLogout,children:\"Logout\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'20px',padding:'15px',backgroundColor:'#e7f1ff',borderRadius:'8px'},children:/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'16px',margin:0},children:\"Welcome to your patient portal. View your appointments and medications using the links below.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav-links\",children:[/*#__PURE__*/_jsx(Link,{to:\"/portal/appointments\",children:\"All Appointments\"}),/*#__PURE__*/_jsx(Link,{to:\"/portal/medications\",children:\"All Medications\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Patient Information\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",patientData.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date of Birth:\"}),\" \",patientData.dob||\"N/A\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",patientData.phone||\"N/A\"]}),patientData.address&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Address:\"}),\" \",patientData.address]})]})]})});}export default Dashboard;","map":{"version":3,"names":["useEffect","useState","Link","useNavigate","patientAPI","jsx","_jsx","jsxs","_jsxs","Dashboard","_ref","user","setUser","summary","setSummary","loading","setLoading","navigate","handleLogout","fetchSummary","patientId","id","console","log","res","get","concat","data","err","error","className","children","patientData","patient","first_name","last_name","onClick","style","marginTop","padding","backgroundColor","borderRadius","fontSize","margin","to","email","dob","phone","address"],"sources":["/Users/roshithamakula/Downloads/Z/mini-emr-frontend/src/components/PatientPortal/Dashboard.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { patientAPI } from \"../../api/api\";\n\nfunction Dashboard({ user, setUser }) {\n  const [summary, setSummary] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n\n  const handleLogout = () => {\n    setUser(null);\n    navigate(\"/\");\n  };\n\n  useEffect(() => {\n    if (!user) {\n      navigate(\"/\");\n      return;\n    }\n\n    const fetchSummary = async () => {\n      try {\n        const patientId = user.id;\n        console.log(\"Fetching summary for patient ID:\", patientId);\n        const res = await patientAPI.get(`summary/${patientId}/`);\n        console.log(\"Summary response:\", res.data);\n        setSummary(res.data);\n        setLoading(false);\n      } catch (err) {\n        console.error(\"Error fetching summary:\", err);\n        setLoading(false);\n      }\n    };\n\n    fetchSummary();\n  }, [user, navigate]);\n\n  if (!user) return null;\n\n  if (loading) {\n    return (\n      <div className=\"container\">\n        <div className=\"card\">\n          <p>Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Get patient data from summary if available, otherwise use user\n  const patientData = summary?.patient || user;\n\n  return (\n    <div className=\"container\">\n      <div className=\"card\">\n        <div className=\"header\">\n          <h2>Welcome, {patientData.first_name} {patientData.last_name}</h2>\n          <button className=\"btn btn-secondary\" onClick={handleLogout}>\n            Logout\n          </button>\n        </div>\n\n        <div style={{marginTop: '20px', padding: '15px', backgroundColor: '#e7f1ff', borderRadius: '8px'}}>\n          <p style={{fontSize: '16px', margin: 0}}>\n            Welcome to your patient portal. View your appointments and medications using the links below.\n          </p>\n        </div>\n\n        <div className=\"nav-links\">\n          <Link to=\"/portal/appointments\">All Appointments</Link>\n          <Link to=\"/portal/medications\">All Medications</Link>\n        </div>\n\n        <div style={{marginTop: '20px'}}>\n          <h3>Patient Information</h3>\n          <p><strong>Email:</strong> {patientData.email}</p>\n          <p><strong>Date of Birth:</strong> {patientData.dob || \"N/A\"}</p>\n          <p><strong>Phone:</strong> {patientData.phone || \"N/A\"}</p>\n          {patientData.address && <p><strong>Address:</strong> {patientData.address}</p>}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}