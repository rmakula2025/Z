{"ast":null,"code":"import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{patientAPI}from\"../../api/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Appointments(_ref){let{user}=_ref;const[appointments,setAppointments]=useState([]);const[loading,setLoading]=useState(true);const navigate=useNavigate();useEffect(()=>{if(!user){navigate(\"/\");return;}const fetchAppointments=async()=>{try{const res=await patientAPI.get(\"appointments/\".concat(user.patient_id,\"/\"));setAppointments(res.data);setLoading(false);}catch(err){console.error(\"Error fetching appointments:\",err);setLoading(false);}};fetchAppointments();},[user,navigate]);if(!user)return null;if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})})});}return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Appointments (90 Days)\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>navigate(\"/portal/dashboard\"),children:\"Back to Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>navigate(\"/\"),children:\"Logout\"})]})]}),appointments.length>0?/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date & Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Doctor\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Reason\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Notes\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:appointments.map(apt=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:new Date(apt.appointment_date).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{children:apt.doctor_name}),/*#__PURE__*/_jsx(\"td\",{children:apt.reason}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 8px',borderRadius:'4px',backgroundColor:apt.status==='scheduled'?'#d1ecf1':apt.status==='completed'?'#d4edda':'#fff3cd',color:apt.status==='scheduled'?'#0c5460':apt.status==='completed'?'#155724':'#856404'},children:apt.status})}),/*#__PURE__*/_jsx(\"td\",{children:apt.notes||\"N/A\"})]},apt._id))})]}):/*#__PURE__*/_jsx(\"p\",{className:\"alert alert-info\",children:\"No appointments found in the last 90 days.\"})]})});}export default Appointments;","map":{"version":3,"names":["useEffect","useState","useNavigate","patientAPI","jsx","_jsx","jsxs","_jsxs","Appointments","_ref","user","appointments","setAppointments","loading","setLoading","navigate","fetchAppointments","res","get","concat","patient_id","data","err","console","error","className","children","onClick","length","map","apt","Date","appointment_date","toLocaleString","doctor_name","reason","style","padding","borderRadius","backgroundColor","status","color","notes","_id"],"sources":["/Users/bhargavduddugunta/Desktop/mini-emr-frontend/src/components/PatientPortal/Appointments.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { patientAPI } from \"../../api/api\";\n\nfunction Appointments({ user }) {\n  const [appointments, setAppointments] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (!user) {\n      navigate(\"/\");\n      return;\n    }\n\n    const fetchAppointments = async () => {\n      try {\n        const res = await patientAPI.get(`appointments/${user.patient_id}/`);\n        setAppointments(res.data);\n        setLoading(false);\n      } catch (err) {\n        console.error(\"Error fetching appointments:\", err);\n        setLoading(false);\n      }\n    };\n\n    fetchAppointments();\n  }, [user, navigate]);\n\n  if (!user) return null;\n\n  if (loading) {\n    return (\n      <div className=\"container\">\n        <div className=\"card\">\n          <p>Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"card\">\n        <div className=\"header\">\n          <h2>My Appointments (90 Days)</h2>\n          <div>\n            <button className=\"btn btn-secondary\" onClick={() => navigate(\"/portal/dashboard\")}>\n              Back to Dashboard\n            </button>\n            <button className=\"btn btn-secondary\" onClick={() => navigate(\"/\")}>\n              Logout\n            </button>\n          </div>\n        </div>\n\n        {appointments.length > 0 ? (\n          <table>\n            <thead>\n              <tr>\n                <th>Date & Time</th>\n                <th>Doctor</th>\n                <th>Reason</th>\n                <th>Status</th>\n                <th>Notes</th>\n              </tr>\n            </thead>\n            <tbody>\n              {appointments.map((apt) => (\n                <tr key={apt._id}>\n                  <td>{new Date(apt.appointment_date).toLocaleString()}</td>\n                  <td>{apt.doctor_name}</td>\n                  <td>{apt.reason}</td>\n                  <td>\n                    <span style={{\n                      padding: '4px 8px',\n                      borderRadius: '4px',\n                      backgroundColor: apt.status === 'scheduled' ? '#d1ecf1' : \n                                     apt.status === 'completed' ? '#d4edda' : '#fff3cd',\n                      color: apt.status === 'scheduled' ? '#0c5460' : \n                             apt.status === 'completed' ? '#155724' : '#856404'\n                    }}>\n                      {apt.status}\n                    </span>\n                  </td>\n                  <td>{apt.notes || \"N/A\"}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        ) : (\n          <p className=\"alert alert-info\">No appointments found in the last 90 days.</p>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Appointments;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}