{"ast":null,"code":"import{useEffect,useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{patientAPI}from\"../../api/api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Dashboard(_ref){let{user}=_ref;const[summary,setSummary]=useState(null);const[loading,setLoading]=useState(true);const navigate=useNavigate();useEffect(()=>{if(!user){navigate(\"/\");return;}const fetchSummary=async()=>{try{const res=await patientAPI.get(\"summary/\".concat(user.patient_id,\"/\"));setSummary(res.data);setLoading(false);}catch(err){console.error(\"Error fetching summary:\",err);setLoading(false);}};fetchSummary();},[user,navigate]);if(!user)return null;if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})})});}return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome, \",user.first_name,\" \",user.last_name]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>navigate(\"/\"),children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav-links\",children:[/*#__PURE__*/_jsx(Link,{to:\"/portal/appointments\",children:\"All Appointments\"}),/*#__PURE__*/_jsx(Link,{to:\"/portal/medications\",children:\"All Medications\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Patient Information\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",user.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date of Birth:\"}),\" \",user.date_of_birth]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",user.phone||\"N/A\"]})]}),summary&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'30px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Upcoming Appointments (Next 7 Days)\"}),summary.upcoming_appointments&&summary.upcoming_appointments.length>0?/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date & Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Doctor\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Reason\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:summary.upcoming_appointments.map((apt,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:new Date(apt.appointment_date).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{children:apt.doctor_name}),/*#__PURE__*/_jsx(\"td\",{children:apt.reason}),/*#__PURE__*/_jsx(\"td\",{children:apt.status})]},index))})]}):/*#__PURE__*/_jsx(\"p\",{className:\"alert alert-info\",children:\"No upcoming appointments in the next 7 days.\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'30px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Medications Needing Refill Soon\"}),summary.refill_needed&&summary.refill_needed.length>0?/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Medication\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Dosage\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Refills Remaining\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Prescribed By\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:summary.refill_needed.map((med,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:med.medication_name}),/*#__PURE__*/_jsx(\"td\",{children:med.dosage}),/*#__PURE__*/_jsx(\"td\",{children:med.refills_remaining}),/*#__PURE__*/_jsx(\"td\",{children:med.prescribed_by})]},index))})]}):/*#__PURE__*/_jsx(\"p\",{className:\"alert alert-info\",children:\"No medications need refills soon.\"})]})]})]})});}export default Dashboard;","map":{"version":3,"names":["useEffect","useState","Link","useNavigate","patientAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","_ref","user","summary","setSummary","loading","setLoading","navigate","fetchSummary","res","get","concat","patient_id","data","err","console","error","className","children","first_name","last_name","onClick","to","style","marginTop","email","date_of_birth","phone","upcoming_appointments","length","map","apt","index","Date","appointment_date","toLocaleString","doctor_name","reason","status","refill_needed","med","medication_name","dosage","refills_remaining","prescribed_by"],"sources":["/Users/bhargavduddugunta/Desktop/mini-emr-frontend/src/components/PatientPortal/Dashboard.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { patientAPI } from \"../../api/api\";\n\nfunction Dashboard({ user }) {\n  const [summary, setSummary] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (!user) {\n      navigate(\"/\");\n      return;\n    }\n\n    const fetchSummary = async () => {\n      try {\n        const res = await patientAPI.get(`summary/${user.patient_id}/`);\n        setSummary(res.data);\n        setLoading(false);\n      } catch (err) {\n        console.error(\"Error fetching summary:\", err);\n        setLoading(false);\n      }\n    };\n\n    fetchSummary();\n  }, [user, navigate]);\n\n  if (!user) return null;\n\n  if (loading) {\n    return (\n      <div className=\"container\">\n        <div className=\"card\">\n          <p>Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"card\">\n        <div className=\"header\">\n          <h2>Welcome, {user.first_name} {user.last_name}</h2>\n          <button className=\"btn btn-secondary\" onClick={() => navigate(\"/\")}>\n            Logout\n          </button>\n        </div>\n\n        <div className=\"nav-links\">\n          <Link to=\"/portal/appointments\">All Appointments</Link>\n          <Link to=\"/portal/medications\">All Medications</Link>\n        </div>\n\n        <div style={{marginTop: '20px'}}>\n          <h3>Patient Information</h3>\n          <p><strong>Email:</strong> {user.email}</p>\n          <p><strong>Date of Birth:</strong> {user.date_of_birth}</p>\n          <p><strong>Phone:</strong> {user.phone || \"N/A\"}</p>\n        </div>\n\n        {summary && (\n          <>\n            <div style={{marginTop: '30px'}}>\n              <h3>Upcoming Appointments (Next 7 Days)</h3>\n              {summary.upcoming_appointments && summary.upcoming_appointments.length > 0 ? (\n                <table>\n                  <thead>\n                    <tr>\n                      <th>Date & Time</th>\n                      <th>Doctor</th>\n                      <th>Reason</th>\n                      <th>Status</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {summary.upcoming_appointments.map((apt, index) => (\n                      <tr key={index}>\n                        <td>{new Date(apt.appointment_date).toLocaleString()}</td>\n                        <td>{apt.doctor_name}</td>\n                        <td>{apt.reason}</td>\n                        <td>{apt.status}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              ) : (\n                <p className=\"alert alert-info\">No upcoming appointments in the next 7 days.</p>\n              )}\n            </div>\n\n            <div style={{marginTop: '30px'}}>\n              <h3>Medications Needing Refill Soon</h3>\n              {summary.refill_needed && summary.refill_needed.length > 0 ? (\n                <table>\n                  <thead>\n                    <tr>\n                      <th>Medication</th>\n                      <th>Dosage</th>\n                      <th>Refills Remaining</th>\n                      <th>Prescribed By</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {summary.refill_needed.map((med, index) => (\n                      <tr key={index}>\n                        <td>{med.medication_name}</td>\n                        <td>{med.dosage}</td>\n                        <td>{med.refills_remaining}</td>\n                        <td>{med.prescribed_by}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              ) : (\n                <p className=\"alert alert-info\">No medications need refills soon.</p>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}